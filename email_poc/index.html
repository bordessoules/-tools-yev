<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Geekadomicile - Clients</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; background:#eef1f5; color:#222; }

.hdr {
    background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);
    color:#fff; padding:28px 32px 22px; text-align:center;
}
.hdr h1 { font-size:26px; margin-bottom:6px; }
.hdr-sub { font-size:13px; opacity:.75; }

.controls {
    position:sticky; top:0; z-index:100;
    background:#fff; padding:12px 20px;
    border-bottom:1px solid #ddd;
    display:flex; align-items:center; gap:12px;
}
.search-box {
    flex:1; padding:8px 14px; border:1px solid #ccc;
    border-radius:6px; font-size:14px; outline:none;
}
.search-box:focus { border-color:#3498db; box-shadow:0 0 0 2px rgba(52,152,219,.2); }
.client-count { font-size:13px; color:#888; white-space:nowrap; }

.grid {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(320px, 1fr));
    gap:16px; padding:20px; max-width:1200px; margin:0 auto;
}

.card {
    background:#fff; border-radius:10px; padding:20px;
    border-left:4px solid #3498db;
    box-shadow:0 1px 4px rgba(0,0,0,.08);
    cursor:pointer; transition:transform .15s, box-shadow .15s;
    text-decoration:none; color:inherit; display:block;
}
.card:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,.12); }
.card-name { font-size:17px; font-weight:600; margin-bottom:8px; color:#1a1a2e; }
.card-info { font-size:12px; color:#666; line-height:1.6; }
.card-info span { display:block; }
.card-badge {
    display:inline-block; margin-top:10px; padding:3px 10px;
    border-radius:12px; font-size:11px; font-weight:600;
    background:#eef1f5; color:#555;
}
.card-badge.has-data { background:#e8f5e9; color:#2e7d32; }

.no-results { text-align:center; padding:40px; color:#888; font-size:15px; }

@media(max-width:640px) {
    .grid { grid-template-columns:1fr; padding:12px; }
    .hdr { padding:20px 16px 16px; }
    .hdr h1 { font-size:20px; }
}
</style>
</head>
<body>

<div class="hdr">
    <h1>Geekadomicile</h1>
    <div class="hdr-sub">Timelines clients</div>
</div>

<div class="controls">
    <input class="search-box" type="text" placeholder="Rechercher un client (nom, email, tel)..." oninput="doSearch(this.value)">
    <span class="client-count" id="client-count">4 clients</span>
</div>

<div class="grid" id="grid">
    
    <a class="card" href="timeline_duhammel-daniele.html"
       data-search="daniele duhammel danieleduhammel@gmail.com +33681372829 +33139660499 3 rue jean de la bruyère 78000 versailles">
        <div class="card-name">Daniele Duhammel</div>
        <div class="card-info">
            
            <span>Tel: +33681372829, +33139660499</span>
            
            
            <span>Email: danieleduhammel@gmail.com</span>
            
            
            <span>Adr: 3 Rue Jean De La Bruyère 78000 Versailles</span>
            
        </div>
        
        <span class="card-badge has-data">164 echanges</span>
        
    </a>
    
    <a class="card" href="timeline_danielle.monsimier@wanadoo.fr.html"
       data-search="danielle.monsimier@wanadoo.fr danielle.monsimier@wanadoo.fr  ">
        <div class="card-name">danielle.monsimier@wanadoo.fr</div>
        <div class="card-info">
            
            
            <span>Email: danielle.monsimier@wanadoo.fr</span>
            
            
        </div>
        
        <span class="card-badge">0 echanges</span>
        
    </a>
    
    <a class="card" href="timeline_dany.darcos@wanadoo.fr.html"
       data-search="dany.darcos@wanadoo.fr dany.darcos@wanadoo.fr  ">
        <div class="card-name">dany.darcos@wanadoo.fr</div>
        <div class="card-info">
            
            
            <span>Email: dany.darcos@wanadoo.fr</span>
            
            
        </div>
        
        <span class="card-badge">0 echanges</span>
        
    </a>
    
    <a class="card" href="timeline_danieledihammel@gmail.com.html"
       data-search="danieledihammel@gmail.com danieledihammel@gmail.com  ">
        <div class="card-name">danieledihammel@gmail.com</div>
        <div class="card-info">
            
            
            <span>Email: danieledihammel@gmail.com</span>
            
            
        </div>
        
        <span class="card-badge">0 echanges</span>
        
    </a>
    
</div>

<div class="no-results" id="no-results" style="display:none">Aucun client ne correspond.</div>

<script>
(function() {
    'use strict';
    var cards = document.querySelectorAll('.card');
    var countEl = document.getElementById('client-count');
    var noResults = document.getElementById('no-results');

    /* Levenshtein distance — nb minimum d'éditions pour passer de a à b */
    function levDist(a, b) {
        if (a === b) return 0;
        if (!a.length) return b.length;
        if (!b.length) return a.length;
        var m = [];
        for (var i = 0; i <= b.length; i++) m[i] = [i];
        for (var j = 0; j <= a.length; j++) m[0][j] = j;
        for (i = 1; i <= b.length; i++)
            for (j = 1; j <= a.length; j++)
                m[i][j] = a[j-1] === b[i-1]
                    ? m[i-1][j-1]
                    : Math.min(m[i-1][j-1]+1, m[i][j-1]+1, m[i-1][j]+1);
        return m[b.length][a.length];
    }

    /* Vérifie si un mot query matche un mot du texte avec tolérance */
    function fuzzyWordMatch(qWord, textWords) {
        var maxDist = qWord.length <= 5 ? 1 : 2;
        for (var i = 0; i < textWords.length; i++) {
            var tw = textWords[i];
            /* Match exact ou fuzzy entre mots de taille similaire */
            if (Math.abs(qWord.length - tw.length) <= maxDist) {
                if (levDist(qWord, tw) <= maxDist) return true;
            }
            /* Sous-chaîne : query word contenu dans un mot plus long (ex: "dihammel" dans "danieledihammel") */
            if (tw.length > qWord.length && tw.indexOf(qWord) !== -1) return true;
        }
        return false;
    }

    window.doSearch = function(query) {
        var q = query.toLowerCase().trim();
        var visible = 0;
        cards.forEach(function(card) {
            var text = card.getAttribute('data-search') || '';
            var show = false;
            if (!q) {
                show = true;
            } else if (text.indexOf(q) !== -1) {
                /* Match exact (substring) — prioritaire */
                show = true;
            } else if (q.length > 3) {
                /* Match flou : chaque mot de la query doit matcher un mot du texte */
                var qWords = q.split(/\s+/).filter(function(w) { return w.length > 2; });
                var textWords = text.split(/[\s@.]+/).filter(function(w) { return w.length > 2; });
                show = qWords.length > 0 && qWords.every(function(qw) {
                    return fuzzyWordMatch(qw, textWords);
                });
            }
            card.style.display = show ? '' : 'none';
            if (show) visible++;
        });
        countEl.textContent = visible + ' / ' + cards.length + ' clients';
        noResults.style.display = visible === 0 ? '' : 'none';
    };
})();
</script>

</body>
</html>